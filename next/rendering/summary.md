## Next.jsのレンダリング方法
- SSG(Static Site Generation)
    - ビルド時にHTMLを生成する
    - ビルド時にデータを取得する
    - ビルド時に`getStaticProps`を使用し、ページにpropsを返す
    - 初期化後は通常のReactアプリケーション同様に、APIなどからデータを取得する
    - メリット
        - 初期描画が高速
        - SEO対策が容易
        - ページ遷移が高速
    - デメリット
        - ビルド時なので、情報が古い可能性大。
        - ビルド時にデータを取得するので、データが多い場合はビルドに時間がかかる
- SSR(Server Side Rendering)
    - リクエスト毎にHTMLを生成する
    - リクエスト毎にデータを取得する
    - デファクトのレンダリング方法
- CSR(Client Side Rendering)
    - クライアント側でHTMLを生成する
    - クライアント側でデータを取得する
    - 'use client’は、Next.jsのClient Componentにおいて、useState、OnClickなどのクライアントサイドのインタラクティブ性が必要な場合に使用されるディレクティブです。このディレクティブは、ファイルの最初の行に追加する必要があります。サーバーコンポーネントを直接クライアントコンポーネントに使用することはできません。クライアントコンポーネントは、useState、useEffect、useRefなどのフックを使用できます
- ISR(Incremental Static Regeneration)
    - SSGのHTMLをキャッシュしておき、必要に応じて再生成する
    - アクセスに応じて、ページを再生成する
    - 有効期限を設定することができる

### レンダリング方法の設定方法
- ファイル内部でコンポーネントのほかに実装する関数やその関数の返す値によって、レンダリング手法が切り替わる。
- ビルド時の結果でそれぞれのページがどのタイプか出力される。

### レンダリング方法と関数の対応
| レンダリング方式 | データ取得に使う主な関数 | データ取得のタイミング | 補足 |
| --- | --- | --- | --- |
| SSG | getStaticProps | ビルド時 | ビルド時にデータを取得する。<br>データ取得を一切行わない場合もSSG相当 |
| SSR | getServerSideProps | リクエスト毎(サーバサイドで) | リクエスト毎にデータを取得する。<br>一応、getInitialPropsも使えるが非推奨 |
| ISR | getStaticProps | ビルド時とリクエスト毎 | ビルド時にデータを取得する。<br>リクエスト毎にデータを再生成する。<br>データの再生成は、データの有効期限が切れた場合に。<br>デプロイ後もバックグランドビルドが実行される。 |
| CSR | 上記以外の任意の関数(useSWRなど) | リクエスト毎(クライアントサイドで) | SSG/SSR/ISRと同時に利用可能。 |